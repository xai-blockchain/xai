# Node & Miner Onboarding Guide

This guide describes how a newcomer can spin up a node or miner with minimal typing. The goal is to make the community feel welcome—every step ties into existing APIs, configuration helpers, and scripts so you can start in minutes.

## 1. Prerequisites

1. Install Python 3.11+ and `pip`.
2. `cd` into the repo root and run:
   ```bash
   python -m pip install -r requirements.txt
   ```
3. (Optional) Set environment variables you care about, e.g. `XAI_NETWORK=mainnet` or `XAI_TIME_CAPSULE_MASTER_KEY=` for deterministic capsule addresses.

## 2. Prepare a ready node profile

Run one of the helper scripts that creates directories, records your miner address, and prints the commands to launch the node/miner:

- `python scripts/node_wizard.py` walks you through interactive prompts and echoes the commands.
- `python scripts/prepare_node.py --miner XAI1...` is the flag-based version for automation.

```bash
python scripts/prepare_node.py \
  --miner XAI1myMinerAddress... \
  --rpc-port 18545 \
  --p2p-port 18544 \
  --data-dir ./data/my-node
```

The script writes `node_config.json` into the target `data-dir` and echoes:

- `python core/node.py --miner <address> --data-dir ./data/my-node --rpc-port 18545`
- `curl` examples for `/mining/start`, `/metrics`, `/wallet-trades`, and `/time-capsule/pending`.
  It also checks the data tree for cheap verification.

## 3. Start the node + miner

Once the script completes:

```bash
python core/node.py --miner XAI1myMinerAddress... --data-dir ./data/my-node --rpc-port 18545 --p2p-port 18544
```

Use the mining API to keep the work running:

```bash
curl -X POST http://localhost:18545/mining/start \
  -H "Content-Type: application/json" \
  -d '{"miner_address":"XAI1myMinerAddress","threads":2,"intensity":"medium"}'
```

Use the `/metrics` endpoint (Prometheus-style) to hook dashboards or `grafana/dashboards` for quick status.

## 4. Stay connected

1. Node registration: use the `scripts/prepare_node.py --register-peer` flag (optional) to emit a `node_entries.json` file that you can share with explorers.
2. Watch `logs/node.log` and `/time-capsule/pending` for alerts; the helper script prints sample `curl` commands.
3. Run `python -m pytest` (the repo defaults to `-m "not slow"`) whenever you change configuration to confirm integrity.

## 5. Time Capsule windows & reminders

- Time Capsules can only be initiated during the March or November windows described in `time_capsule.py`. The onboarding script prints when the next window opens so you can plan your “burial.”
- The time capsule status API now includes a “safe & secure” reminder plus a delta when the on-chain value increases, so your dashboards can gently nudge holders to return without hyperbole.

## Wallet Reminder Daemon

- Run `python scripts/wallet_reminder_daemon.py` once a day (for example at 05:00 UTC) so every eligible miner/node hears about their pre-loaded wallet until it is claimed.
  - Linux example (cron): `0 5 * * * /usr/bin/python /path/to/Crypto/scripts/wallet_reminder_daemon.py`
  - Windows example (Task Scheduler action): `Program/script: python`, `Add arguments: C:/Users/decri/GitClones/Crypto/scripts/wallet_reminder_daemon.py`
- The daemon now prints a summary of how many pending claims are tracked and exposes `/wallet-claims/summary`; point dashboards (including `docs/grafana_dashboard.json` or `aixn/templates/dashboard.html`) at this endpoint so operators can watch pending counts and due dates.
- Daily reminders automatically fall back to monthly after the user dismisses them, so moving the script into your production cron or scheduler keeps the flow bullet-proof.

## 6. Next steps

- If you want a public dashboard, point Grafana at `http://localhost:18545/metrics` and import `docs/grafana_dashboard.json`.
- Add your node to the peer list by sharing the `node_config.json` file generated by `scripts/prepare_node.py` so explorers can reach you.
- Read `docs/MINI_APPS.md` to embed polls/votes/games via `/mini-apps/manifest` while layering in the AML signals your dashboard already shows.
- For mobile/light clients, see `docs/LIGHT_CLIENT.md`, `docs/MOBILE_BRIDGE.md`, and `docs/PUSH_NOTIFICATIONS.md` (draft/commit flow + reminder webhooks).
