# ===================
# XAI Node Configuration
# ===================
# Copy this file to .env and configure your node
# WARNING: Never commit .env with real credentials to git!

# ================
# Network Settings
# ================
# Network type: testnet or mainnet
XAI_NETWORK=testnet

# Node identity
XAI_NODE_NAME=my-xai-node

# ================
# Port Configuration
# ================
# RPC port for API access
XAI_RPC_PORT=12001

# P2P port for peer connections
XAI_P2P_PORT=12000

# Prometheus metrics port
XAI_METRICS_PORT=12090

# ================
# Data Storage
# ================
# Data directory for blockchain storage
XAI_DATA_DIR=~/.xai/data

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
XAI_LOG_LEVEL=INFO

# ================
# Node Operation Mode
# ================
# Node mode: full, pruned, light, archival
# - full: Complete blockchain with recent blocks
# - pruned: Keep only recent blocks (save disk space)
# - light: Headers only (minimal resources)
# - archival: Full history with indices (for explorers)
XAI_NODE_MODE=full

# Block retention (for pruned mode)
# 0 = keep all blocks (full/archival mode)
# >0 = keep last N blocks (pruned mode)
# Minimum: 100 blocks, Recommended: 1000-10000
XAI_PRUNE_BLOCKS=0

# Enable checkpoint sync for faster initial sync
XAI_CHECKPOINT_SYNC=true

# ================
# Mining Configuration
# ================
# Mining reward address (required for mining)
MINER_ADDRESS=

# Enable/disable mining
XAI_MINING_ENABLED=false

# Number of mining threads
XAI_MINING_THREADS=1

# Mining difficulty (testnet default: 2, mainnet: 4)
# XAI_INITIAL_DIFFICULTY=2

# Target block time in seconds (default: 120)
# XAI_BLOCK_TIME_TARGET=120

# ================
# API Configuration
# ================
# API authentication key
XAI_API_KEY=

# Require API authentication
XAI_API_AUTH_REQUIRED=0

# Additional API keys (comma-separated)
XAI_API_KEYS=

# Admin API token
XAI_API_ADMIN_TOKEN=

# Admin keys (comma-separated)
XAI_API_ADMIN_KEYS=

# Operator keys (comma-separated)
XAI_API_OPERATOR_KEYS=

# Auditor keys (read-only, comma-separated)
XAI_API_AUDITOR_KEYS=

# CORS allowed origins (comma-separated, * for all)
XAI_API_ALLOWED_ORIGINS=*

# API rate limit (requests per window)
XAI_API_RATE_LIMIT=120

# API rate limit window in seconds
XAI_API_RATE_WINDOW_SECONDS=60

# Maximum JSON payload size in bytes
XAI_API_MAX_JSON_BYTES=1048576

# Supported API versions (comma-separated)
XAI_API_VERSIONS=v1,v2

# Default API version
XAI_API_DEFAULT_VERSION=v2

# Deprecated versions (version=sunset_date)
XAI_API_VERSION_DEPRECATIONS=v1=Wed, 01 Jan 2025 00:00:00 GMT

# API documentation URL
XAI_API_VERSION_DOCS_URL=https://github.com/xai-blockchain/xai/blob/main/docs/api/versioning.md

# API key storage path
XAI_API_KEY_STORE=./secure_keys/api_keys.json

# API key default TTL in days
XAI_API_KEY_DEFAULT_TTL_DAYS=90

# API key maximum TTL in days
XAI_API_KEY_MAX_TTL_DAYS=365

# Allow permanent API keys (1=yes, 0=no)
XAI_API_KEY_ALLOW_PERMANENT=0

# ================
# Security Settings
# ================
# JWT secret for mainnet (REQUIRED for mainnet)
# Generate: python -c "import secrets; print(secrets.token_hex(32))"
XAI_JWT_SECRET=

# Wallet trade peer secret (REQUIRED for mainnet)
XAI_WALLET_TRADE_PEER_SECRET=

# Time capsule master key (REQUIRED for mainnet)
XAI_TIME_CAPSULE_MASTER_KEY=

# Embedded wallet salt (REQUIRED for mainnet)
XAI_EMBEDDED_SALT=

# Lucky block seed (REQUIRED for mainnet)
XAI_LUCKY_BLOCK_SEED=

# Wallet password for encrypted storage
XAI_WALLET_PASSWORD=

# Embedded wallet directory
XAI_EMBEDDED_DIR=./embedded_wallets

# Wallet trade peers (comma-separated URLs)
XAI_WALLET_TRADE_PEERS=

# Hardware wallet derivation path
XAI_LEDGER_PATH=44'/0'/0'/0/0

# Emergency circuit breaker
XAI_EMERGENCY_PAUSER=0xAdmin
XAI_EMERGENCY_CIRCUIT_THRESHOLD=3
XAI_EMERGENCY_CIRCUIT_TIMEOUT_SECONDS=300

# Security webhook for alerts
XAI_SECURITY_WEBHOOK_URL=
XAI_SECURITY_WEBHOOK_TOKEN=
XAI_SECURITY_WEBHOOK_TIMEOUT=5
XAI_SECURITY_WEBHOOK_QUEUE=./data/security_webhook_queue.json
XAI_SECURITY_WEBHOOK_QUEUE_KEY=

# ================
# P2P Network Settings
# ================
# DNS seeds for peer discovery (comma-separated)
XAI_P2P_DNS_SEEDS=

# Bootstrap nodes (comma-separated host:port)
XAI_P2P_BOOTSTRAP_NODES=

# Maximum peers to maintain
XAI_MAX_PEERS=50

# Maximum connections per IP
XAI_P2P_MAX_CONNECTIONS_PER_IP=50

# Peer diversity limits
XAI_P2P_MAX_PEERS_PER_PREFIX=8
XAI_P2P_MAX_PEERS_PER_ASN=16
XAI_P2P_MAX_PEERS_PER_COUNTRY=48
XAI_P2P_DIVERSITY_PREFIX_LENGTH=16
XAI_P2P_MIN_UNIQUE_PREFIXES=5
XAI_P2P_MIN_UNIQUE_ASNS=5
XAI_P2P_MIN_UNIQUE_COUNTRIES=5
XAI_P2P_MAX_UNKNOWN_GEO=32

# GeoIP lookup configuration
XAI_P2P_GEOIP_ENDPOINT=https://ipinfo.io/{ip}/json
XAI_P2P_GEOIP_TIMEOUT=2.5
XAI_P2P_GEOIP_CACHE_TTL=3600

# Bandwidth limits (bytes per second)
XAI_P2P_MAX_BANDWIDTH_IN=1048576
XAI_P2P_MAX_BANDWIDTH_OUT=1048576

# Message rate limiting
XAI_P2P_MAX_MESSAGE_RATE=100
XAI_P2P_SECURITY_LOG_RATE=20

# Connection timeouts
XAI_P2P_PING_INTERVAL_SECONDS=20
XAI_P2P_PING_TIMEOUT_SECONDS=20
XAI_P2P_CLOSE_TIMEOUT_SECONDS=10
XAI_P2P_IDLE_TIMEOUT_SECONDS=900
XAI_P2P_MONITOR_INTERVAL_SECONDS=30
XAI_P2P_MAX_RECONNECT_BACKOFF_SECONDS=300

# Sync settings
XAI_P2P_SYNC_INTERVAL_SECONDS=30

# Partial sync (download only missing blocks)
XAI_PARTIAL_SYNC_ENABLED=1
XAI_P2P_PARTIAL_SYNC_ENABLED=1
XAI_P2P_PARTIAL_SYNC_MIN_DELTA=100

# Parallel sync (multiple workers)
XAI_P2P_PARALLEL_SYNC_ENABLED=1
XAI_P2P_PARALLEL_SYNC_WORKERS=4
XAI_P2P_PARALLEL_SYNC_CHUNK_SIZE=128
XAI_P2P_PARALLEL_SYNC_RETRY=2
XAI_P2P_PARALLEL_SYNC_PAGE_LIMIT=200

# TLS/SSL configuration
XAI_PEER_TLS_REQUIRED=0
XAI_PEER_CA_BUNDLE=
XAI_P2P_CA_BUNDLE=

# Client certificate authentication
XAI_PEER_REQUIRE_CLIENT_CERT=0

# Trusted peer verification
XAI_TRUSTED_PEER_PUBKEYS=
XAI_TRUSTED_PEER_CERT_FPS=
XAI_TRUSTED_PEER_PUBKEYS_FILE=
XAI_TRUSTED_PEER_CERT_FPS_FILE=

# Peer authentication
XAI_PEER_API_KEY=
XAI_PEER_NONCE_TTL_SECONDS=300

# QUIC protocol (experimental)
XAI_P2P_ENABLE_QUIC=0
XAI_P2P_QUIC_DIAL_TIMEOUT=1.0

# Proof-of-Work anti-spam
XAI_P2P_POW_ENABLED=1
XAI_P2P_POW_DIFFICULTY_BITS=18
XAI_P2P_POW_MAX_ITERATIONS=250000
XAI_P2P_POW_REUSE_WINDOW_SECONDS=600

# ================
# Blockchain Configuration
# ================
# Genesis file paths
# XAI_GENESIS_FILE=genesis_testnet.json

# Genesis hash validation (for mainnet security)
XAI_TESTNET_GENESIS_HASH=59b30b2d8525512cbd5715b24546d73b540ddb575d3778fdbdff02ba245a9141
XAI_MAINNET_GENESIS_HASH=

# Block header versioning
XAI_BLOCK_HEADER_VERSION=1
XAI_BLOCK_HEADER_ALLOWED_VERSIONS=1

# ================
# Mempool Configuration
# ================
# Maximum transactions in mempool
XAI_MEMPOOL_MAX_SIZE=10000

# Maximum transactions per sender
XAI_MEMPOOL_MAX_PER_SENDER=100

# Minimum fee rate (XAI per byte)
XAI_MEMPOOL_MIN_FEE_RATE=0.0000001

# Invalid transaction handling
XAI_MEMPOOL_INVALID_TX_THRESHOLD=3
XAI_MEMPOOL_INVALID_BAN_SECONDS=900
XAI_MEMPOOL_INVALID_WINDOW_SECONDS=900
XAI_MEMPOOL_ALERT_INVALID_DELTA=50
XAI_MEMPOOL_ALERT_BAN_DELTA=10
XAI_MEMPOOL_ALERT_ACTIVE_BANS=1

# ================
# Virtual Machine (EVM)
# ================
# Enable VM execution
XAI_VM_ENABLED=0

# Maximum gas per contract execution
XAI_MAX_CONTRACT_GAS=20000000

# ================
# Trading & Exchange
# ================
# Trade fee percentage
# XAI_TRADE_FEE_PERCENT=0.002

# Trade order expiry in seconds
# XAI_TRADE_ORDER_EXPIRY=3600

# Trade fee destination address
# XAI_TRADE_FEE_ADDRESS=TXAITRADEFEE

# ================
# Atomic Swaps
# ================
# Atomic swap fee rate
XAI_ATOMIC_SWAP_FEE_RATE=0.0000005

# UTXO transaction size estimate (bytes)
XAI_ATOMIC_SWAP_UTXO_TX_SIZE=300

# Ethereum gas limits
XAI_ATOMIC_SWAP_ETH_GAS_LIMIT=200000
XAI_ATOMIC_SWAP_ETH_MAX_FEE_GWEI=60
XAI_ATOMIC_SWAP_ETH_PRIORITY_FEE_GWEI=2

# ================
# Crypto Deposit Monitoring
# ================
# Enable deposit monitoring
XAI_CRYPTO_DEPOSIT_MONITOR_ENABLED=0

# Polling interval in seconds
XAI_CRYPTO_DEPOSIT_POLL_INTERVAL=30

# Polling jitter in seconds
XAI_CRYPTO_DEPOSIT_POLL_JITTER=5

# Deposit sources configuration (JSON object)
# Example: {"BTC":{"rpc":"http://user:pass@localhost:8332","confirmations":6}}
XAI_CRYPTO_DEPOSIT_SOURCES=

# ================
# AI Integration
# ================
# Anthropic AI API Key (for AI trading, governance, personal AI)
ANTHROPIC_API_KEY=

# OpenAI API Key (optional)
OPENAI_API_KEY=

# Google AI API Key (optional)
GOOGLE_AI_API_KEY=

# Personal AI assistant webhook
XAI_PERSONAL_AI_WEBHOOK_URL=
XAI_PERSONAL_AI_WEBHOOK_TIMEOUT=5

# ================
# Monitoring & Observability
# ================
# Enable Prometheus metrics
XAI_PROMETHEUS_ENABLED=true

# Sentry error tracking DSN
XAI_SENTRY_DSN=

# ================
# Database Configuration
# ================
# Database URL (for persistence)
DATABASE_URL=sqlite:///~/.xai/blockchain.db

# ================
# Feature Flags
# ================
# Enable specific features (1=enabled, 0=disabled)
# Most features are production-ready and enabled by default

# ================
# Testing & Development
# ================
# Faucet (testnet only)
# XAI_FAUCET_ENABLED=1
# XAI_FAUCET_AMOUNT=100.0

# Allow chain reset (testnet only)
# XAI_ALLOW_CHAIN_RESET=1
