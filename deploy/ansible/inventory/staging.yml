---
# ============================================================================
# XAI Blockchain - Staging Inventory
# ============================================================================

all:
  vars:
    # Environment
    environment: staging
    deployment_version: "1.0.0-rc.1"
    
    # Application settings
    app_env: staging
    log_level: DEBUG
    enable_mining: true
    
    # Database settings
    postgres_host: "postgres.staging.internal"
    postgres_port: 5432
    postgres_db: "xai_staging"
    postgres_backup_enabled: true
    postgres_backup_retention_days: 7
    
    # Redis settings
    redis_host: "redis.staging.internal"
    redis_port: 6379
    redis_cluster_enabled: false
    redis_replication_enabled: true
    
    # Blockchain network
    network_id: "0xABCD"  # Testnet
    network_name: "testnet"
    min_peers: 3
    max_peers: 50
    
    # Security
    enable_tls: true
    tls_cert_path: "/etc/ssl/certs/xai-staging.crt"
    tls_key_path: "/etc/ssl/private/xai-staging.key"
    firewall_enabled: true
    p2p_require_client_cert: false
    p2p_trusted_cert_fps: []
    p2p_trusted_peer_pubkeys: []
    p2p_nonce_ttl_seconds: 180
    p2p_ca_bundle: "/etc/ssl/certs/ca-bundle.crt"
    p2p_allowed_ips:
      - "10.1.0.0/16"
    
    # Monitoring
    monitoring_enabled: true
    prometheus_enabled: true
    grafana_enabled: true
    alert_email: "dev-team@company.internal"
    
    # Backup
    backup_enabled: true
    backup_schedule: "0 3 * * *"  # Daily at 3 AM
    backup_retention_days: 7
    backup_s3_bucket: "xai-backups-staging"
    
    # Performance tuning
    worker_threads: 8
    max_connections: 100
    cache_size: 1024

  children:
    blockchain-nodes:
      hosts:
        blockchain-node-staging-1:
          ansible_host: 10.1.1.10
          ansible_user: ubuntu
          node_id: "staging-node-1"
          mining_enabled: true
          
        blockchain-node-staging-2:
          ansible_host: 10.1.2.10
          ansible_user: ubuntu
          node_id: "staging-node-2"
          mining_enabled: true
      
      vars:
        blockchain_node_port: 18333
        blockchain_api_port: 18080
        blockchain_ws_port: 18081
        blockchain_metrics_port: 19090

    block-explorers:
      hosts:
        explorer-staging-1:
          ansible_host: 10.1.1.20
          ansible_user: ubuntu
          explorer_id: "staging-explorer-1"
      
      vars:
        explorer_port: 18082
        explorer_db_host: "postgres.staging.internal"

    monitoring-servers:
      hosts:
        prometheus-staging-1:
          ansible_host: 10.1.1.30
          ansible_user: ubuntu
          
        grafana-staging-1:
          ansible_host: 10.1.1.31
          ansible_user: ubuntu
      
      vars:
        prometheus_retention_days: 7
        grafana_admin_user: "admin"

    backup-servers:
      hosts:
        backup-staging-1:
          ansible_host: 10.1.1.40
          ansible_user: ubuntu
      
      vars:
        backup_type: "incremental"
        backup_compression: "gzip"
